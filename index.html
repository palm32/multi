<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>phpPhysics</title>
  <style>
    body { margin: 0; overflow: hidden; background-color: #000; }
    #container { width: 100vw; height: 100vh; }
    #instructions {
      position: absolute;
      top: 10px; left: 10px;
      color: white; background: rgba(0, 0, 0, 0.7);
      padding: 10px; font-family: sans-serif;
      font-size: 14px; border-radius: 5px;
    }
  </style>
</head>
<body>
  <div id="container"></div>
  <div id="instructions">
    <div>WASD: Move</div>
    <div>Right Click + Drag: Camera</div>
  </div>

  <script type="module">
    import * as THREE from 'https://cdn.skypack.dev/three@0.128.0';
    
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js';
    import { getDatabase, ref, set, onValue, remove } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js';

    const firebaseConfig = {
      apiKey: "AIzaSyDE2QbNxsbq4pyfF6yilaBfmJBz2jbbW9U",
      authDomain: "admoc-f6665.firebaseapp.com",
      projectId: "admoc-f6665",
      storageBucket: "admoc-f6665.appspot.com",
      messagingSenderId: "1026640514932",
      appId: "1:1026640514932:web:abcdef12345678",
      databaseURL: "https://admoc-f6665-default-rtdb.firebaseio.com"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const playerId = crypto.randomUUID();
    remove(ref(db, 'players/' + playerId)); // Cleanup any leftover clone
    const playersRef = ref(db, 'players');

    const otherPlayers = {};

    function sendPosition(pos) {
      set(ref(db, 'players/' + playerId), {
        x: pos.x,
        y: pos.y,
        z: pos.z,
        t: Date.now()
      });
    }

    function listenForPlayers(createCharacterClone) {
      onValue(playersRef, snapshot => {
  const data = snapshot.val() || {};
  const now = Date.now();
  for (const id in data) {
    if (now - data[id].t > 10000) {
      remove(ref(db, 'players/' + id)); // Remove inactive player after 10 sec
    }
  }
        for (const id in data) {
          if (id === playerId) continue;
          const info = data[id];
          if (!otherPlayers[id]) {
            const clone = createCharacterClone();
            scene.add(clone);
            otherPlayers[id] = clone;
          }
          const p = otherPlayers[id].position;
          p.x = info.x;
          p.y = info.y;
          p.z = info.z;
        }

        // Cleanup removed players
        for (const id in otherPlayers) {
          if (!data[id]) {
            scene.remove(otherPlayers[id]);
            delete otherPlayers[id];
          }
        }
      });
    }

    
    let lastInputTime = Date.now();

    function resetInactivityTimer() {
      lastInputTime = Date.now();
    }

    document.addEventListener('keydown', resetInactivityTimer);
    document.addEventListener('mousedown', resetInactivityTimer);

    setInterval(() => {
      const now = Date.now();
      const inactiveMs = now - lastInputTime;
      if (inactiveMs > 120000) { // 2 minutes
        console.log("Disconnected due to inactivity.");
        remove(ref(db, 'players/' + playerId));
        location.reload();
      }
    }, 5000);


    window.addEventListener('beforeunload', () => {
  navigator.sendBeacon(
    firebaseConfig.databaseURL + '/players/' + playerId + '.json',
    JSON.stringify(null)
  );
});


import * as CANNON from 'https://cdn.skypack.dev/cannon-es';

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.getElementById('container').appendChild(renderer.domElement);

    // Physics
    const world = new CANNON.World({ gravity: new CANNON.Vec3(0, -9.82, 0) });

    // Ground
    const groundBody = new CANNON.Body({ mass: 0, shape: new CANNON.Plane() });
    groundBody.quaternion.setFromEuler(-Math.PI / 2, 0, 0);
    world.addBody(groundBody);

    const groundMesh = new THREE.Mesh(
      new THREE.PlaneGeometry(100, 100),
      new THREE.MeshStandardMaterial({ color: 0x446304 })
    );
    groundMesh.rotation.x = -Math.PI / 2;
    groundMesh.receiveShadow = true;
    scene.add(groundMesh);

    // Lighting
    scene.add(new THREE.AmbientLight(0xffffff, 0.5));
    const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
    dirLight.position.set(10, 20, 10);
    dirLight.castShadow = true;
    scene.add(dirLight);

    // Character
    function createCharacterClone() {
      const clone = character.clone();
      clone.traverse(obj => {
        if (obj.isMesh) {
          obj.material = obj.material.clone();
        }
      });
      return clone;
    }

    listenForPlayers(createCharacterClone);

    const character = new THREE.Group();
    const bodyMat = new THREE.MeshLambertMaterial({ color: 0xBF3131 });
    const headMat = new THREE.MeshLambertMaterial({ color: 0xFFDBB3 });
    const limbMat = new THREE.MeshLambertMaterial({ color: 0xFFDBB3 });
    const legMat = new THREE.MeshLambertMaterial({ color: 0x7D0A0A });

    
    import { GLTFLoader } from 'https://cdn.skypack.dev/three@0.128.0/examples/jsm/loaders/GLTFLoader.js';

    const glbBase64 = 'data:application/octet-stream;base64,Z2xURgIAAAA8IQAAUAgAAEpTT057ImFzc2V0Ijp7InZlcnNpb24iOiIyLjAiLCJnZW5lcmF0b3IiOiJUSFJFRS5HTFRGRXhwb3J0ZXIgcjE3OCJ9LCJzY2VuZXMiOlt7Im5hbWUiOiJTY2VuZSIsIm5vZGVzIjpbMCwxLDJdfV0sInNjZW5lIjowLCJub2RlcyI6W3sibmFtZSI6IkN5bGluZGVyIiwibWVzaCI6MH0seyJtYXRyaXgiOlsxLDAsMCwwLDAsMC41LDAsMCwwLDAsMSwwLDAsMC41MDEwODc1OTgxMzg4MjU5LDAsMV0sIm5hbWUiOiJTcGhlcmUiLCJtZXNoIjoxfSx7Im1hdHJpeCI6WzEsMCwwLDAsMCwwLjUsMCwwLDAsMCwxLDAsMCwtMC41MDA5NjMwODE3MTA2MzUsMCwxXSwibmFtZSI6IlNwaGVyZSIsIm1lc2giOjF9XSwiYnVmZmVyVmlld3MiOlt7ImJ1ZmZlciI6MCwiYnl0ZU9mZnNldCI6MCwiYnl0ZUxlbmd0aCI6OTEyLCJ0YXJnZXQiOjM0OTYyLCJieXRlU3RyaWRlIjoxMn0seyJidWZmZXIiOjAsImJ5dGVPZmZzZXQiOjkxMiwiYnl0ZUxlbmd0aCI6OTEyLCJ0YXJnZXQiOjM0OTYyLCJieXRlU3RyaWRlIjoxMn0seyJidWZmZXIiOjAsImJ5dGVPZmZzZXQiOjE4MjQsImJ5dGVMZW5ndGgiOjYwOCwidGFyZ2V0IjozNDk2MiwiYnl0ZVN0cmlkZSI6OH0seyJidWZmZXIiOjAsImJ5dGVPZmZzZXQiOjI0MzIsImJ5dGVMZW5ndGgiOjI4OCwidGFyZ2V0IjozNDk2M30seyJidWZmZXIiOjAsImJ5dGVPZmZzZXQiOjI3MjAsImJ5dGVMZW5ndGgiOjEwOTIsInRhcmdldCI6MzQ5NjIsImJ5dGVTdHJpZGUiOjEyfSx7ImJ1ZmZlciI6MCwiYnl0ZU9mZnNldCI6MzgxMiwiYnl0ZUxlbmd0aCI6MTA5MiwidGFyZ2V0IjozNDk2MiwiYnl0ZVN0cmlkZSI6MTJ9LHsiYnVmZmVyIjowLCJieXRlT2Zmc2V0Ijo0OTA0LCJieXRlTGVuZ3RoIjo3MjgsInRhcmdldCI6MzQ5NjIsImJ5dGVTdHJpZGUiOjh9LHsiYnVmZmVyIjowLCJieXRlT2Zmc2V0Ijo1NjMyLCJieXRlTGVuZ3RoIjo3MjAsInRhcmdldCI6MzQ5NjN9XSwiYnVmZmVycyI6W3siYnl0ZUxlbmd0aCI6NjM1Mn1dLCJhY2Nlc3NvcnMiOlt7ImJ1ZmZlclZpZXciOjAsImNvbXBvbmVudFR5cGUiOjUxMjYsImNvdW50Ijo3NiwibWF4IjpbMSwwLjUsMV0sIm1pbiI6Wy0xLC0wLjUsLTFdLCJ0eXBlIjoiVkVDMyJ9LHsiYnVmZmVyVmlldyI6MSwiY29tcG9uZW50VHlwZSI6NTEyNiwiY291bnQiOjc2LCJtYXgiOlsxLDEsMV0sIm1pbiI6Wy0xLC0xLC0xXSwidHlwZSI6IlZFQzMifSx7ImJ1ZmZlclZpZXciOjIsImNvbXBvbmVudFR5cGUiOjUxMjYsImNvdW50Ijo3NiwibWF4IjpbMSwxXSwibWluIjpbMCwwXSwidHlwZSI6IlZFQzIifSx7ImJ1ZmZlclZpZXciOjMsImNvbXBvbmVudFR5cGUiOjUxMjMsImNvdW50IjoxNDQsIm1heCI6Wzc1XSwibWluIjpbMF0sInR5cGUiOiJTQ0FMQVIifSx7ImJ1ZmZlclZpZXciOjQsImNvbXBvbmVudFR5cGUiOjUxMjYsImNvdW50Ijo5MSwibWF4IjpbMSwxLDFdLCJtaW4iOlstMSwtMSwtMV0sInR5cGUiOiJWRUMzIn0seyJidWZmZXJWaWV3Ijo1LCJjb21wb25lbnRUeXBlIjo1MTI2LCJjb3VudCI6OTEsIm1heCI6WzEsMSwxXSwibWluIjpbLTEsLTEsLTFdLCJ0eXBlIjoiVkVDMyJ9LHsiYnVmZmVyVmlldyI6NiwiY29tcG9uZW50VHlwZSI6NTEyNiwiY291bnQiOjkxLCJtYXgiOlsxLjA0MTY2NjYyNjkzMDIzNjgsMV0sIm1pbiI6Wy0wLjA0MTY2NjY2NzkwODQzMDEsMF0sInR5cGUiOiJWRUMyIn0seyJidWZmZXJWaWV3Ijo3LCJjb21wb25lbnRUeXBlIjo1MTIzLCJjb3VudCI6MzYwLCJtYXgiOls5MF0sIm1pbiI6WzBdLCJ0eXBlIjoiU0NBTEFSIn1dLCJtYXRlcmlhbHMiOlt7InBick1ldGFsbGljUm91Z2huZXNzIjp7Im1ldGFsbGljRmFjdG9yIjowLCJyb3VnaG5lc3NGYWN0b3IiOjF9fSx7InBick1ldGFsbGljUm91Z2huZXNzIjp7Im1ldGFsbGljRmFjdG9yIjowLCJyb3VnaG5lc3NGYWN0b3IiOjF9fV0sIm1lc2hlcyI6W3sicHJpbWl0aXZlcyI6W3sibW9kZSI6NCwiYXR0cmlidXRlcyI6eyJQT1NJVElPTiI6MCwiTk9STUFMIjoxLCJURVhDT09SRF8wIjoyfSwiaW5kaWNlcyI6MywibWF0ZXJpYWwiOjB9XX0seyJwcmltaXRpdmVzIjpbeyJtb2RlIjo0LCJhdHRyaWJ1dGVzIjp7IlBPU0lUSU9OIjo0LCJOT1JNQUwiOjUsIlRFWENPT1JEXzAiOjZ9LCJpbmRpY2VzIjo3LCJtYXRlcmlhbCI6MX1dfV190BgAAEJJTgAAAAAAAAAAPwAAgD8AAAA/AAAAP9ezXT/Xs10/AAAAPwAAAD8AAIA/AAAAPzIxjSTXs10/AAAAPwAAAL8AAAA/AAAAP9ezXb8yMQ0lAAAAPwAAgL8AAAC/AAAAP9ezXb/Xs12/AAAAPwAAAL8AAIC/AAAAP8rJU6XXs12/AAAAPwAAAD8AAAC/AAAAP9ezXT8yMY2lAAAAPwAAgD8AAAAAAAAAvwAAgD8AAAA/AAAAv9ezXT/Xs10/AAAAvwAAAD8AAIA/AAAAvzIxjSTXs10/AAAAvwAAAL8AAAA/AAAAv9ezXb8yMQ0lAAAAvwAAgL8AAAC/AAAAv9ezXb/Xs12/AAAAvwAAAL8AAIC/AAAAv8rJU6XXs12/AAAAvwAAAD8AAAC/AAAAv9ezXT8yMY2lAAAAvwAAgD8AAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAAAAAAAAAAAAAPwAAgD8AAAA/AAAAP9ezXT/Xs10/AAAAPwAAAD8AAIA/AAAAPzIxjSTXs10/AAAAPwAAAL8AAAA/AAAAP9ezXb8yMQ0lAAAAPwAAgL8AAAC/AAAAP9ezXb/Xs12/AAAAPwAAAL8AAIC/AAAAP8rJU6XXs12/AAAAPwAAAD8AAAC/AAAAP9ezXT8yMY2lAAAAPwAAgD8AAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAAAAAAAAAAAAAvwAAgD8AAAA/AAAAv9ezXT/Xs10/AAAAvwAAAD8AAIA/AAAAvzIxjSTXs10/AAAAvwAAAL8AAAA/AAAAv9ezXb8yMQ0lAAAAvwAAgL8AAAC/AAAAv9ezXb/Xs12/AAAAvwAAAL8AAIC/AAAAv8rJU6XXs12/AAAAvwAAAD8AAAC/AAAAv9ezXT8yMY2lAAAAvwAAgD8AAAAAAAAAAAAAgD8AAAA/AAAAANezXT/Xs10/AAAAAAAAAD8AAIA/AAAAADIxjSTXs10/AAAAAAAAAL8AAAA/AAAAANezXb8yMQ0lAAAAAAAAgL8AAAC/AAAAANezXb/Xs12/AAAAAAAAAL8AAIC/AAAAAMrJU6XXs12/AAAAAAAAAD8AAAC/AAAAANezXT8yMY2lAAAAAAAAgD8AAAAAAAAAAAAAgD8AAAA/AAAAANezXT/Xs10/AAAAAAAAAD8AAIA/AAAAADIxjSTXs10/AAAAAAAAAL8AAAA/AAAAANezXb8yMQ0lAAAAAAAAgL8AAAC/AAAAANezXb/Xs12/AAAAAAAAAL8AAIC/AAAAAMrJU6XXs12/AAAAAAAAAD8AAAC/AAAAANezXT8yMY2lAAAAAAAAgD8AAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAA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LCJieXRlT2Zmc2V0Ijo5MTIsImJ5dGVMZW5ndGgiOjkxMiwidGFyZ2V0IjozNDk2MiwiYnl0ZVN0cmlkZSI6MTJ9LHsiYnVmZmVyIjowLCJieXRlT2Zmc2V0IjoxODI0LCJieXRlTGVuZ3RoIjo2MDgsInRhcmdldCI6MzQ5NjIsImJ5dGVTdHJpZGUiOjh9LHsiYnVmZmVyIjowLCJieXRlT2Zmc2V0IjoyNDMyLCJieXRlTGVuZ3RoIjoyODgsInRhcmdldCI6MzQ5NjN9LHsiYnVmZmVyIjowLCJieXRlT2Zmc2V0IjoyNzIwLCJieXRlTGVuZ3RoIjoyMDI4LCJ0YXJnZXQiOjM0OTYyLCJieXRlU3RyaWRlIjoxMn0seyJidWZmZXIiOjAsImJ5dGVPZmZzZXQiOjQ3NDgsImJ5dGVMZW5ndGgiOjIwMjgsInRhcmdldCI6MzQ5NjIsImJ5dGVTdHJpZGUiOjEyfSx7ImJ1ZmZlciI6MCwiYnl0ZU9mZnNldCI6Njc3NiwiYnl0ZUxlbmd0aCI6MTM1MiwidGFyZ2V0IjozNDk2MiwiYnl0ZVN0cmlkZSI6OH0seyJidWZmZXIiOjAsImJ5dGVPZmZzZXQiOjgxMjgsImJ5dGVMZW5ndGgiOjE1ODQsInRhcmdldCI6MzQ5NjN9XSwiYnVmZmVycyI6W3siYnl0ZUxlbmd0aCI6OTcxMn1dLCJhY2Nlc3NvcnMiOlt7ImJ1ZmZlclZpZXciOjAsImNvbXBvbmVudFR5cGUiOjUxMjYsImNvdW50Ijo3NiwibWF4IjpbMSwwLjUsMV0sIm1pbiI6Wy0xLC0wLjUsLTFdLCJ0eXBlIjoiVkVDMyJ9LHsiYnVmZmVyVmlldyI6MSwiY29tcG9uZW50VHlwZSI6NTEyNiwiY291bnQiOjc2LCJtYXgiOlsxLDEsMV0sIm1pbiI6Wy0xLC0xLC0xXSwidHlwZSI6IlZFQzMifSx7ImJ1ZmZlclZpZXciOjIsImNvbXBvbmVudFR5cGUiOjUxMjYsImNvdW50Ijo3NiwibWF4IjpbMSwxXSwibWluIjpbMCwwXSwidHlwZSI6IlZFQzIifSx7ImJ1ZmZlclZpZXciOjMsImNvbXBvbmVudFR5cGUiOjUxMjMsImNvdW50IjoxNDQsIm1heCI6Wzc1XSwibWluIjpbMF0sInR5cGUiOiJTQ0FMQVIifSx7ImJ1ZmZlclZpZXciOjQsImNvbXBvbmVudFR5cGUiOjUxMjYsImNvdW50IjoxNjksIm1heCI6WzEsMSwxXSwibWluIjpbLTEsLTEsLTFdLCJ0eXBlIjoiVkVDMyJ9LHsiYnVmZmVyVmlldyI6NSwiY29tcG9uZW50VHlwZSI6NTEyNiwiY291bnQiOjE2OSwibWF4IjpbMSwxLDFdLCJtaW4iOlstMSwtMSwtMV0sInR5cGUiOiJWRUMzIn0seyJidWZmZXJWaWV3Ijo2LCJjb21wb25lbnRUeXBlIjo1MTI2LCJjb3VudCI6MTY5LCJtYXgiOlsxLjA0MTY2NjYyNjkzMDIzNjgsMV0sIm1pbiI6Wy0wLjA0MTY2NjY2NzkwODQzMDEsMF0sInR5cGUiOiJWRUMyIn0seyJidWZmZXJWaWV3Ijo3LCJjb21wb25lbnRUeXBlIjo1MTIzLCJjb3VudCI6NzkyLCJtYXgiOlsxNjhdLCJtaW4iOlswXSwidHlwZSI6IlNDQUxBUiJ9XSwibWF0ZXJpYWxzIjpbeyJwYnJNZXRhbGxpY1JvdWdobmVzcyI6eyJtZXRhbGxpY0ZhY3RvciI6MCwicm91Z2huZXNzRmFjdG9yIjoxfX0seyJwYnJNZXRhbGxpY1JvdWdobmVzcyI6eyJtZXRhbGxpY0ZhY3RvciI6MCwicm91Z2huZXNzRmFjdG9yIjoxfX1dLCJtZXNoZXMiOlt7InByaW1pdGl2ZXMiOlt7Im1vZGUiOjQsImF0dHJpYnV0ZXMiOnsiUE9TSVRJT04iOjAsIk5PUk1BTCI6MSwiVEVYQ09PUkRfMCI6Mn0sImluZGljZXMiOjMsIm1hdGVyaWFsIjowfV19LHsicHJpbWl0aXZlcyI6W3sibW9kZSI6NCwiYXR0cmlidXRlcyI6eyJQT1NJVElPTiI6NCwiTk9STUFMIjo1LCJURVhDT09SRF8wIjo2fSwiaW5kaWNlcyI6NywibWF0ZXJpYWwiOjF9XX1dffAlAABCSU4AAAAAAAAAAD8AAIA/AAAAPwAAAD/Xs10/17NdPwAAAD8AAAA/AACAPwAAAD8yMY0k17NdPwAAAD8AAAC/AAAAPwAAAD/Xs12/MjENJQAAAD8AAIC/AAAAvwAAAD/Xs12/17NdvwAAAD8AAAC/AACAvwAAAD/KyVOl17NdvwAAAD8AAAA/AAAAvwAAAD/Xs10/MjGNpQAAAD8AAIA/AAAAAAAAAL8AAIA/AAAAPwAAAL/Xs10/17NdPwAAAL8AAAA/AACAPwAAAL8yMY0k17NdPwAAAL8AAAC/AAAAPwAAAL/Xs12/MjENJQAAAL8AAIC/AAAAvwAAAL/Xs12/17NdvwAAAL8AAAC/AACAvwAAAL/KyVOl17NdvwAAAL8AAAA/AAAAvwAAAL/Xs10/MjGNpQAAAL8AAIA/AAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAAAAAAAAAAAAAD8AAIA/AAAAPwAAAD/Xs10/17NdPwAAAD8AAAA/AACAPwAAAD8yMY0k17NdPwAAAD8AAAC/AAAAPwAAAD/Xs12/MjENJQAAAD8AAIC/AAAAvwAAAD/Xs12/17NdvwAAAD8AAAC/AACAvwAAAD/KyVOl17NdvwAAAD8AAAA/AAAAvwAAAD/Xs10/MjGNpQAAAD8AAIA/AAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAAAAAAAAAAAAAL8AAIA/AAAAPwAAAL/Xs10/17NdPwAAAL8AAAA/AACAPwAAAL8yMY0k17NdPwAAAL8AAAC/AAAAPwAAAL/Xs12/MjENJQAAAL8AAIC/AAAAvwAAAL/Xs12/17NdvwAAAL8AAAC/AACAvwAAAL/KyVOl17NdvwAAAL8AAAA/AAAAvwAAAL/Xs10/MjGNpQAAAL8AAIA/AAAAAAAAAAAAAIA/AAAAPwAAAADXs10/17NdPwAAAAAAAAA/AACAPwAAAAAyMY0k17NdPwAAAAAAAAC/AAAAPwAAAADXs12/MjENJQAAAAAAAIC/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GAAZAA4ADQAbAA0AGgAbAA8ADgAcAA4AGwAcABAADwAdAA8AHAAdABEAEAAeABAAHQAeABIAEQAfABEAHgAfABMAEgAgABIAHwAgABQAEwAhABMAIAAhABUAFAAiABQAIQAiABYAFQAjABUAIgAjABcAFgAkABYAIwAkABgAFwAlABcAJAAlABkAGAAmABgAJQAmABsAGgAoABoAJwAoABwAGwApABsAKAApAB0AHAAqABwAKQAqAB4AHQArAB0AKgArAB8AHgAsAB4AKwAsACAAHwAtAB8ALAAtACEAIAAuACAALQAuACIAIQAvACEALgAvACMAIgAwACIALwAwACQAIwAxACMAMAAxACUAJAAyACQAMQAyACYAJQAzACUAMgAzACgAJwA1ACcANAA1ACkAKAA2ACgANQA2ACoAKQA3ACkANgA3ACsAKgA4ACoANwA4ACwAKwA5ACsAOAA5AC0ALAA6ACwAOQA6AC4ALQA7AC0AOgA7AC8ALgA8AC4AOwA8ADAALwA9AC8APAA9ADEAMAA+ADAAPQA+ADIAMQA/ADEAPgA/ADMAMgBAADIAPwBAADUANABCADQAQQBCADYANQBDADUAQgBDADcANgBEADYAQwBEADgANwBFADcARABFADkAOABGADgARQBGADoAOQBHADkARgBHADsAOgBIADoARwBIADwAOwBJADsASABJAD0APABKADwASQBKAD4APQBLAD0ASgBLAD8APgBMAD4ASwBMAEAAPwBNAD8ATABNAEIAQQBPAEEATgBPAEMAQgBQAEIATwBQAEQAQwBRAEMAUABRAEUARABSAEQAUQBSAEYARQBTAEUAUgBTAEcARgBUAEYAUwBUAEgARwBVAEcAVABVAEkASABWAEgAVQBWAEoASQBXAEkAVgBXAEsASgBYAEoAVwBYAEwASwBZAEsAWABZAE0ATABaAEwAWQBaAE8ATgBcAE4AWwBcAFAATwBdAE8AXABdAFEAUABeAFAAXQBeAFIAUQBfAFEAXgBfAFMAUgBgAFIAXwBgAFQAUwBhAFMAYABhAFUAVABiAFQAYQBiAFYAVQBjAFUAYgBjAFcAVgBkAFYAYwBkAFgAVwBlAFcAZABlAFkAWABmAFgAZQBmAFoAWQBnAFkAZgBnAFwAWwBpAFsAaABpAF0AXABqAFwAaQBqAF4AXQBrAF0AagBrAF8AXgBsAF4AawBsAGAAXwBtAF8AbABtAGEAYABuAGAAbQBuAGIAYQBvAGEAbgBvAGMAYgBwAGIAbwBwAGQAYwBxAGMAcABxAGUAZAByAGQAcQByAGYAZQBzAGUAcgBzAGcAZgB0AGYAcwB0AGkAaAB2AGgAdQB2AGoAaQB3AGkAdgB3AGsAagB4AGoAdwB4AGwAawB5AGsAeAB5AG0AbAB6AGwAeQB6AG4AbQB7AG0AegB7AG8AbgB8AG4AewB8AHAAbwB9AG8AfAB9AHEAcAB+AHAAfQB+AHIAcQB/AHEAfgB/AHMAcgCAAHIAfwCAAHQAcwCBAHMAgACBAHYAdQCDAHUAggCDAHcAdgCEAHYAgwCEAHgAdwCFAHcAhACFAHkAeACGAHgAhQCGAHoAeQCHAHkAhgCHAHsAegCIAHoAhwCIAHwAewCJAHsAiACJAH0AfACKAHwAiQCKAH4AfQCLAH0AigCLAH8AfgCMAH4AiwCMAIAAfwCNAH8AjACNAIEAgACOAIAAjQCOAIMAggCQAIIAjwCQAIQAgwCRAIMAkACRAIUAhACSAIQAkQCSAIYAhQCTAIUAkgCTAIcAhgCUAIYAkwCUAIgAhwCVAIcAlACVAIkAiACWAIgAlQCWAIoAiQCXAIkAlgCXAIsAigCYAIoAlwCYAIwAiwCZAIsAmACZAI0AjACaAIwAmQCaAI4AjQCbAI0AmgCbAJAAjwCdAJEAkACeAJIAkQCfAJMAkgCgAJQAkwChAJUAlACiAJYAlQCjAJcAlgCkAJgAlwClAJkAmACmAJoAmQCnAJsAmgCoAA==';
    const glbBlob = await (await fetch(glbBase64)).blob();
    const glbUrl = URL.createObjectURL(glbBlob);
    const loader = new GLTFLoader();

    loader.load(glbUrl, gltf => {
      const glbHead = gltf.scene;
      glbHead.scale.set(0.660, 0.690, 0.660);
      glbHead.position.set(0, 2.55, 0);

      glbHead.traverse(child => {
        if (child.isMesh) {
          child.material = new THREE.MeshLambertMaterial({ color: 0xFFDBB3 });
        }
      });

      character.add(glbHead);
    });


    const torso = new THREE.Mesh(new THREE.BoxGeometry(2, 2, 1), bodyMat);
    torso.position.set(0, 1, 0); character.add(torso);

    // PHP label on torso
    const canvas = document.createElement('canvas');
    canvas.width = 256;
    canvas.height = 128;
    const ctx = canvas.getContext('2d');
    ctx.font = 'bold 64px sans-serif';
    ctx.textAlign = 'left';
    ctx.textBaseline = 'top';
    ctx.lineWidth = 8;
    ctx.strokeStyle = '#7D0A0A';
    ctx.strokeText('18o8', 10, 10);
    ctx.fillStyle = 'white';
    ctx.fillText('18o8', 10, 10);
    const texture = new THREE.CanvasTexture(canvas);
    const labelMaterial = new THREE.MeshBasicMaterial({ map: texture, transparent: true });
    const labelPlane = new THREE.Mesh(new THREE.PlaneGeometry(1.2, 0.6), labelMaterial);
    labelPlane.position.set(-0.3, 0.6, 0.51);
    torso.add(labelPlane);

    const leftArmGroup = new THREE.Group();
    const leftArm = new THREE.Mesh(new THREE.BoxGeometry(1, 2, 1), limbMat);
    leftArm.position.set(0, -1, 0); leftArmGroup.add(leftArm);
    leftArmGroup.position.set(-1.5, 2, 0); character.add(leftArmGroup);

    const rightArmGroup = new THREE.Group();
    const rightArm = new THREE.Mesh(new THREE.BoxGeometry(1, 2, 1), limbMat);
    rightArm.position.set(0, -1, 0); rightArmGroup.add(rightArm);
    rightArmGroup.position.set(1.5, 2, 0); character.add(rightArmGroup);

    const leftLegGroup = new THREE.Group();
    const leftLeg = new THREE.Mesh(new THREE.BoxGeometry(1, 2, 1), legMat);
    leftLeg.position.set(0, -1, 0); leftLegGroup.add(leftLeg);
    leftLegGroup.position.set(-0.5, 0, 0); character.add(leftLegGroup);

    const rightLegGroup = new THREE.Group();
    const rightLeg = new THREE.Mesh(new THREE.BoxGeometry(1, 2, 1), legMat);
    rightLeg.position.set(0, -1, 0); rightLegGroup.add(rightLeg);
    rightLegGroup.position.set(0.5, 0, 0); character.add(rightLegGroup);

    character.position.set(0, 2, 0);
    scene.add(character);

    // Torso + Leg colliders
    const legOffsetY = 1;

    const torsoBody = new CANNON.Body({
      mass: 1,
      shape: new CANNON.Box(new CANNON.Vec3(1, 1, 0.5)),
      type: CANNON.Body.KINEMATIC
    });
    world.addBody(torsoBody);

    const leftLegBody = new CANNON.Body({
      mass: 1,
      shape: new CANNON.Box(new CANNON.Vec3(0.5, 1, 0.5)),
      type: CANNON.Body.KINEMATIC
    });
    const rightLegBody = new CANNON.Body({
      mass: 1,
      shape: new CANNON.Box(new CANNON.Vec3(0.5, 1, 0.5)),
      type: CANNON.Body.KINEMATIC
    });
    world.addBody(leftLegBody);
    world.addBody(rightLegBody);

    // Pushable Cube
    const cubeSize = 2;
    const cubeMesh = new THREE.Mesh(
      new THREE.BoxGeometry(cubeSize, cubeSize, cubeSize),
      new THREE.MeshStandardMaterial({ color: 0x8888ff })
    );
    cubeMesh.position.set(5, 5, 0);
    scene.add(cubeMesh);

    const cubeBody = new CANNON.Body({
      mass: 1,
      shape: new CANNON.Box(new CANNON.Vec3(cubeSize / 2, cubeSize / 2, cubeSize / 2)),
      position: new CANNON.Vec3(5, 5, 0)
    });
    world.addBody(cubeBody);

    // Cube Wall
    const wall = [];
    const wallCols = 3;
    const wallRows = 3;
    for (let y = 0; y < wallRows; y++) {
      for (let x = 0; x < wallCols; x++) {
        const mesh = new THREE.Mesh(
          new THREE.BoxGeometry(2, 2, 2),
          new THREE.MeshStandardMaterial({ color: 0xAAAAAA })
        );
        const px = 10 + x * 2.2;
        const py = 1 + y * 2.2;
        mesh.position.set(px, py, 0);
        scene.add(mesh);

        const body = new CANNON.Body({
          mass: 1,
          shape: new CANNON.Box(new CANNON.Vec3(1, 1, 1)),
          position: new CANNON.Vec3(px, py, 0)
        });
        world.addBody(body);
        wall.push({ mesh, body });
      }
    }

       // Input
    const keys = {};
    document.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
    document.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);
    let mouseDown = false, mouseX = 0, mouseY = 0;
    document.addEventListener('mousedown', e => { if (e.button === 2) { mouseDown = true; mouseX = e.clientX; mouseY = e.clientY; } });
    document.addEventListener('mouseup', e => { if (e.button === 2) mouseDown = false; });
    document.addEventListener('mousemove', e => {
      if (mouseDown) {
        const dx = e.clientX - mouseX;
        const dy = e.clientY - mouseY;
        cameraAngleX -= dx * 0.01;
        cameraAngleY += dy * 0.01;
        cameraAngleY = Math.max(-Math.PI / 2 + 0.1, Math.min(Math.PI / 2 - 0.1, cameraAngleY));
        mouseX = e.clientX; mouseY = e.clientY;
      }
    });
    document.addEventListener('contextmenu', e => e.preventDefault());

    // Movement & camera
    const moveSpeed = 0.15;
    let walkTime = 0;
    const tempVec = new THREE.Vector3();
    let cameraAngleX = 0, cameraAngleY = 0.3;
    const cameraDistance = 8;

    function updateCamera() {
      const x = character.position.x + Math.sin(cameraAngleX) * Math.cos(cameraAngleY) * cameraDistance;
      const y = character.position.y + Math.sin(cameraAngleY) * cameraDistance + 2;
      const z = character.position.z + Math.cos(cameraAngleX) * Math.cos(cameraAngleY) * cameraDistance;
      camera.position.set(x, y, z);
      camera.lookAt(character.position.x, character.position.y + 2, character.position.z);
    }

    function updateMovement() {
      tempVec.set(0, 0, 0);
      let isMoving = false;
      if (keys['w']) { tempVec.z -= 1; isMoving = true; }
      if (keys['s']) { tempVec.z += 1; isMoving = true; }
      if (keys['a']) { tempVec.x -= 1; isMoving = true; }
      if (keys['d']) { tempVec.x += 1; isMoving = true; }

      if (tempVec.length() > 0) {
        tempVec.normalize();
        const camDir = new THREE.Vector3();
        camera.getWorldDirection(camDir); camDir.y = 0; camDir.normalize();
        const camRight = new THREE.Vector3().crossVectors(camDir, new THREE.Vector3(0, 1, 0));
        const moveDir = new THREE.Vector3().addScaledVector(camDir, -tempVec.z).addScaledVector(camRight, tempVec.x).normalize().multiplyScalar(moveSpeed);
        character.position.add(moveDir);
        character.rotation.y = Math.atan2(moveDir.x, moveDir.z);
      }

      if (isMoving) {
        walkTime += 0.15;
        const armSwing = Math.sin(walkTime) * 0.7;
        const legSwing = Math.sin(walkTime) * 0.7;
        leftArmGroup.rotation.x = armSwing;
        rightArmGroup.rotation.x = -armSwing;
        leftLegGroup.rotation.x = -legSwing;
        rightLegGroup.rotation.x = legSwing;
      } else {
        leftArmGroup.rotation.x = 0;
        rightArmGroup.rotation.x = 0;
        leftLegGroup.rotation.x = 0;
        rightLegGroup.rotation.x = 0;
      }
    }

    const clock = new THREE.Clock();
    function animate() {
      requestAnimationFrame(animate);
      const delta = clock.getDelta();
      world.step(1 / 60, delta, 3);

      updateMovement();
      updateCamera();

      cubeMesh.position.copy(cubeBody.position);
      cubeMesh.quaternion.copy(cubeBody.quaternion);
      wall.forEach(({ mesh, body }) => {
        mesh.position.copy(body.position);
        mesh.quaternion.copy(body.quaternion);
      });

      torsoBody.position.set(character.position.x, character.position.y + 1, character.position.z);
      leftLegBody.position.set(character.position.x - 0.5, character.position.y - legOffsetY, character.position.z);
      rightLegBody.position.set(character.position.x + 0.5, character.position.y - legOffsetY, character.position.z);

      
      // Multiplayer sync
      sendPosition(character.position);

      renderer.render(scene, camera);
    }

    updateCamera();
    animate();
  </script>
</body>
</html>
